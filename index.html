<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Registro de Estudiantes</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body id="page_theme" class="">
    <section id="student_registration" class="flex flex-col justify-center items-center h-screen ">
        <div class="flex flex-col items-center space-y-6">
            <h1 id="main_title" class="text-4xl">Registro de Estudiantes</h1>
            <div class="flex flex-col items-center space-y-6 border-2 p-4 border-b bg-white rounded w-96">
                <form class="flex flex-col w-64 space-y-4" onsubmit="return false">
                    <div class="flex flex-col space-y-2">
                        <div class="flex">
                            
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 absolute mt-0.5 ml-2 text-slate-400">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                            </svg> 
                            <input id="name_user" type="text" placeholder="Nombre" autocomplete="off" required="true" class="border rounded-full bg-slate-100 px-10 py-1 text-sm">
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 absolute mt-0.5 ml-2 text-slate-400">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z" />
                                </svg>
                                
                            <input id="last_name_user" type="text" autocomplete="off" placeholder="Apellido" required="true" class="border rounded-full bg-slate-100 px-10 py-1 text-sm">
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 absolute mt-0.5 ml-2 text-slate-400">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z" />
                                </svg>
                                
                            <input id="identify_user" type="number" placeholder="Cedula" required="true" class="border rounded-full bg-slate-100 px-10 py-1 text-sm">
                        </div>
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 absolute mt-0.5 ml-2 text-slate-400">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5" />
                                </svg>
                                
                            <input id="course_year" type="text" autocomplete="off" placeholder="Año de estudio" required="true" class="border rounded-full bg-slate-100 px-10 py-1 text-sm">
                        </div>
                    </div>
                    <div class="flex bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full w-52 m-auto">
                        <button id="submit_button" class="flex-1 font-semibold text-white">Enviar</button>
                    </div>                  
                </form>

                <button id="show-users" class="bg-gradient-to-r from-cyan-500 to-blue-500 py-1 px-4 rounded-full text-white ">Mostrar Usuarios</button>

                
                
                <div class="flex justify-end w-80">
                    <div class="flex bg-slate-400 rounded-full px-2.5 py-1">
                        <button id="switch_to_filtered" class="flex font-semibold text-white">Filtrado de Usuarios
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-white mx-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
                        </svg>    
                        </button>                  
                    </div>
                </div>

            </div>
            
        </div>
        
    </section>
    <section id="student_filtering" class="flex flex-col justify-center items-center h-screen hidden">
        <div class="flex flex-col items-center space-y-6">
            <h1 id="main_title_filtering" class="text-4xl">Registro de Estudiantes</h1>
            <div class="flex flex-col items-center space-y-6 border-2 p-4 border-b bg-white rounded w-96">
                <form class="flex flex-col w-64 space-y-4" onsubmit="return false">
                    <div class="flex">
                                    
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 absolute mt-0.5 ml-2 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                        </svg> 
                        <input id="name_user_search" type="text" placeholder="Nombre" autocomplete="off" required="true" class="border rounded-full bg-slate-100 px-10 py-1 text-sm">
                    </div>  
                    <div>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 absolute mt-0.5 ml-2 text-slate-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z" />
                        </svg>
                        
                        <input id="identify_user_search" type="number" placeholder="Cedula" required="true" class="border rounded-full bg-slate-100 px-10 py-1 text-sm">
                    </div>
                    <div class="flex justify-center bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full w-52 m-auto">
                        <button id="search_button" class="flex-1 font-semibold text-white">Buscar</button>
                    </div>
                </form>
                <div class="flex justify-start w-80">
                    <div class="flex bg-slate-400 rounded-full px-2.5 py-1">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-white mx-2 text-center">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" />
                          </svg>  
                        <button id="switch_to_register" class="flex font-semibold text-white">Registrar usuarios   
                        </button>                  
                    </div>
                </div>
            </div>
            <div id="write_users" class="flex flex-col justify-center space-y-6 border-2 p-4 border-b bg-white rounded h-auto w-96">
                <p class="font-bold">Nombre: <span id="name" class="font-normal"></span></p>
                <p class="font-bold">Apellido: <span id="last_name" class="font-normal"></span></p>
                <p class="font-bold">Cedula: <span id="identify" class="font-normal"></span></p>
                <p class="font-bold">Año de estudio: <span id="course" class="font-normal"></span></p>
            </div>
        </div>
    </section>
    <button id="change_mode" class="absolute bg-slate-300 left-0 top-0 m-10 w-10 h-5 rounded-full">
        <div class="bg-white w-5 h-5 rounded-full"></div>
    </button>

    <dialog open class="top-0 h-screen w-screen bg-black/75">
        <div class="flex justify-center items-center h-screen m-auto">
            <div class="w-56 bg-white mr-64">
                <div class="flex flex-col items-center space-y-6 border-2 p-4 border-b bg-white rounded w-max border-none   ">
                    <h2 class="text-xl font-bold">Usuarios Registrados</h2>
                    <div id="registered-user-name" class="grid grid-cols-4">
                        <span class="font-bold">Nombre</span> 
                        <span class="font-bold">Apellido</span>
                        <span class="font-bold">Cedula</span>
                        <span class="font-bold">Año de estudio</span>
                    </div>
                </div>
                <form method="dialog" class="w-56">
                    
                        <button class="w-56 mr-64">Aceptar</button>
                   
                </form>
            </div>
        </div>
    </dialog>
</body>
<script>
    let users = []
    let button = document.getElementById("submit_button")
    button.addEventListener('click', submitButton)

    function submitButton(){
        let nameUser = document.getElementById("name_user").value
        let lastNameUser = document.getElementById("last_name_user").value
        let identifyUser = document.getElementById("identify_user").value
        let courseYear = document.getElementById("course_year").value


        if(nameUser == ""){
        } else if(lastNameUser == ""){
        } else if(identifyUser == ""){
        } else if(courseYear == ""){
        } else {
            let user = {
            name: nameUser,
            lastName: lastNameUser,
            identify: identifyUser,
            course: courseYear
        }
        users.push(user)
        if(localStorage.getItem('Users') == null){
            localStorage.setItem('Users', JSON.stringify(users))
        } else{
            
            let listUsers = JSON.parse(localStorage.getItem('Users'))
            let filterUser = listUsers.find((user) => {
                return user.identify == identifyUser
            })
            if(filterUser == undefined){
                listUsers.push(user)
                localStorage.setItem('Users', JSON.stringify(listUsers))

                let pName = document.createElement("p")
                pName.innerHTML = nameUser
                registeredUserName.appendChild(pName)

                let pLastName = document.createElement("p")
                pLastName.innerHTML = lastNameUser
                registeredUserName.appendChild(pLastName)

                let pIdentify = document.createElement("p")
                pIdentify.innerHTML = identifyUser
                registeredUserName.appendChild(pIdentify)

                let pCourse = document.createElement("p")
                pCourse.innerHTML = courseYear
                registeredUserName.appendChild(pCourse)

                

            } else{
                return alert("Este usuario ya existe")
            }
            
        }
        
            alert("Registrado correctamente");
      
        
        
        let studentRegistration = document.getElementById("student_registration")
        

        studentRegistration.classList.add("hidden")

        let studentFiltering = document.getElementById("student_filtering")
        studentFiltering.classList.remove('hidden')

        
        }

        
    }
    let filterButton = document.getElementById("search_button")
    filterButton.addEventListener('click', searchButton)

    function searchButton(){
        let nameUserSearch = document.getElementById("name_user_search").value
        let identifyUserSearch = document.getElementById("identify_user_search").value

        let listUsers = JSON.parse(localStorage.getItem('Users'))
        let filterUser = listUsers.find((user) => {
            return user.identify == identifyUserSearch && user.name == nameUserSearch
        })

        if(filterUser == undefined){
            return alert("Usuario no encontrado")
        } else{
            let nameUser = document.getElementById("name")
            let lastNameUser = document.getElementById("last_name")
            let identifyUser = document.getElementById("identify")
            let courseUser = document.getElementById("course")

            nameUser.innerHTML = filterUser.name
            lastNameUser.innerHTML = filterUser.lastName
            identifyUser.innerHTML = filterUser.identify
            courseUser.innerHTML = filterUser.course

        }

    }

    let switchFilter = document.getElementById("switch_to_filtered")

    switchFilter.addEventListener('click', switchToFiltered)

    function switchToFiltered(){
    let studentRegistration = document.getElementById("student_registration")
    let studentFiltering = document.getElementById("student_filtering")
    studentRegistration.classList.add('hidden')
    studentFiltering.classList.remove('hidden')
    }

    let switchRegister = document.getElementById("switch_to_register")

    switchRegister.addEventListener('click', switchToRegister)

    function switchToRegister(){
    let studentRegistration = document.getElementById("student_registration")
    let studentFiltering = document.getElementById("student_filtering")
    studentRegistration.classList.remove('hidden')
    studentFiltering.classList.add('hidden')
    }

     // Funciones para cambiar el tema de la pagina

    const mainTitleFiltering = document.getElementById('main_title_filtering')
    const mainTitle = document.getElementById('main_title')
    let textBlack = "text-black"
    let textWhite = "text-white"
    const pageTheme = document.getElementById("page_theme")
    let lightMode = "bg-gradient-to-r from-cyan-500 to-blue-500"
    let darkMode = "bg-gradient-to-r from-indigo-700 to-black"
    darkMode = darkMode.split(" ")
    lightMode = lightMode.split(" ")
    console.log(lightMode)
    lightMode.forEach((classL)=>{
        pageTheme.classList.add(classL)
    })
    mainTitle.classList.add(textBlack)
    mainTitleFiltering.classList.add(textBlack)
    const changeMode = document.getElementById("change_mode")
    changeMode.addEventListener('click', selectMode)

    function selectMode(){
        console.log(pageTheme.classList)
        if(pageTheme.classList[1] == lightMode[1]){
            lightMode.forEach((classL)=>{
                pageTheme.classList.remove(classL)
            })
            mainTitleFiltering.classList.remove(textBlack)
            mainTitle.classList.remove(textBlack)
            darkMode.forEach((classL)=>{
                pageTheme.classList.add(classL)
            })
            mainTitleFiltering.classList.add(textWhite)
            mainTitle.classList.add(textWhite)
            localStorage.setItem("Theme", pageTheme.classList)
            localStorage.setItem("textTheme", mainTitle.classList[1])
        } else{
            darkMode.forEach((classL)=>{
                pageTheme.classList.remove(classL)
            })
            mainTitleFiltering.classList.remove(textWhite)
            mainTitle.classList.remove(textWhite)
            lightMode.forEach((classL)=>{
                pageTheme.classList.add(classL)
            })
            mainTitleFiltering.classList.add(textBlack)
            mainTitle.classList.add(textBlack)
            console.log(mainTitle.classList[1])
            console.log(mainTitle.classList)
            localStorage.setItem("Theme", pageTheme.classList)
            localStorage.setItem("textTheme", mainTitle.classList[1])
        }
    }

    if(localStorage.getItem("Theme") == null){
    } else {
        console.log(mainTitle.classList[1])
        pageTheme.classList.forEach((classL)=>{
            pageTheme.classList.remove(classL)
            if(pageTheme.classList[0] == 'from-cyan-500'){
                pageTheme.classList.remove('from-cyan-500')
            }
            if(pageTheme.classList[0] == 'to-blue-500'){
                pageTheme.classList.remove('to-blue-500')
            }
        })
        mainTitleFiltering.classList.remove(mainTitleFiltering.classList[1])
        mainTitle.classList.remove(mainTitle.classList[1])
        let addClasses = localStorage.getItem("Theme").split(" ")
        addClasses.forEach((classL)=>{
            pageTheme.classList.add(classL)
        })
        mainTitle.classList.add(localStorage.getItem("textTheme"))
        mainTitleFiltering.classList.add(localStorage.getItem("textTheme"))
        
    }

    // Mostrar usuarios registrados

    const registeredUserName = document.getElementById("registered-user-name")

    if(localStorage.getItem("Users") == null){
        let nameUser = document.getElementById("name_user").value
        let lastNameUser = document.getElementById("last_name_user").value
        let identifyUser = document.getElementById("identify_user").value
        let courseYear = document.getElementById("course_year").value
        
        let pName = document.createElement("p")
            pName.innerHTML = nameUser
            registeredUserName.appendChild(pName)
        
            let pLastName = document.createElement("p")
            pLastName.innerHTML = lastNameUser
            registeredUserName.appendChild(pLastName)
        
            let pIdentify= document.createElement("p")
            pIdentify.innerHTML = identifyUser
            registeredUserName.appendChild(pIdentify)

            let pCourse = document.createElement("p")
            pCourse.innerHTML = courseYear
            registeredUserName.appendChild(pCourse)
    } else {
        let arrayUsers = JSON.parse(localStorage.getItem("Users"))
        arrayUsers.forEach((user)=>{
            
            let pName = document.createElement("p")
            pName.innerHTML = user.name
            registeredUserName.appendChild(pName)
        
            let pLastName = document.createElement("p")
            pLastName.innerHTML = user.lastName
            registeredUserName.appendChild(pLastName)
        
            let pIdentify= document.createElement("p")
            pIdentify.innerHTML = user.identify
            registeredUserName.appendChild(pIdentify)

            let pCourse = document.createElement("p")
            pCourse.innerHTML = user.course
            registeredUserName.appendChild(pCourse)

        })
        
    }
    
</script>
</html>